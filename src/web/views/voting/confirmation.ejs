<%- include('../partials/header') %>

<div class="vote-success">
    <div class="success-header">
        <div class="success-icon">
            <i data-lucide="check-circle" style="width: 48px; height: 48px;"></i>
        </div>
        <h1>Vote Successfully Cast!</h1>
        <p class="success-subtitle">Your vote has been recorded anonymously and securely.</p>
    </div>
    
    <div class="confirmation-receipt">
        <div class="receipt-header">
            <i data-lucide="receipt" style="width: 20px; height: 20px;"></i>
            <h2>Your Receipt</h2>
        </div>
        
        <div class="receipt-body">
            <div class="receipt-row">
                <span class="receipt-label">Election</span>
                <span class="receipt-value"><%= election.name %></span>
            </div>
            <div class="receipt-row">
                <span class="receipt-label">Confirmation ID</span>
                <div class="confirmation-id-container">
                    <code class="confirmation-id blurred" data-full-id="<%= confirmation.confirmationID %>">••••••••-••••-••••-••••-<%= confirmation.confirmationID.slice(-12) %></code>
                    <button type="button" class="toggle-blur-btn" title="Show full ID">
                        <i data-lucide="eye" style="width: 14px; height: 14px;"></i>
                    </button>
                </div>
            </div>
            <div class="receipt-row">
                <span class="receipt-label">Date &amp; Time</span>
                <span class="receipt-value"><%= confirmation.confirmedAt.toLocaleString() %></span>
            </div>
        </div>
        
        <div class="receipt-footer">
            <a href="/receipt/<%= confirmation.confirmationID %>" target="_blank" class="btn btn-primary">
                <i data-lucide="printer" style="width: 16px; height: 16px; margin-right: 8px;"></i>
                Print Receipt
            </a>
        </div>
    </div>
    
    <% if (typeof isGuest !== 'undefined' && isGuest) { %>
    <div class="guest-receipt-warning">
        <i data-lucide="alert-triangle" style="width: 20px; height: 20px;"></i>
        <div>
            <strong>Save Your Receipt Now</strong>
            <p>As a guest voter, you won't be able to access this receipt again after leaving this page. Print or save a copy for your records.</p>
        </div>
    </div>
    <% } %>
    
    <div class="privacy-notice">
        <i data-lucide="shield-check" style="width: 20px; height: 20px;"></i>
        <div>
            <strong>Privacy Notice</strong>
            <p>Your vote is completely anonymous. This confirmation proves you voted but does not reveal your vote choice.</p>
        </div>
    </div>
    
    <div class="success-actions">
        <% if (typeof isGuest === 'undefined' || !isGuest) { %>
        <a href="/confirmations" class="btn btn-secondary">
            <i data-lucide="file-check" style="width: 18px; height: 18px; margin-right: 8px;"></i>
            My Voting Record
        </a>
        <% } %>
        <a href="/elections" class="btn btn-secondary">
            <i data-lucide="vote" style="width: 18px; height: 18px; margin-right: 8px;"></i>
            Back to Elections
        </a>
        <% if (typeof isGuest === 'undefined' || !isGuest) { %>
        <a href="/dashboard" class="btn btn-secondary">
            <i data-lucide="home" style="width: 18px; height: 18px; margin-right: 8px;"></i>
            Dashboard
        </a>
        <% } else { %>
        <a href="/register" class="btn btn-primary">
            <i data-lucide="user-plus" style="width: 18px; height: 18px; margin-right: 8px;"></i>
            Create Account
        </a>
        <% } %>
    </div>
</div>

<script src="/public/js/voting.js"></script>

<%- include('../partials/footer') %>
